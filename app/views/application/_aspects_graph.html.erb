<script type="text/javascript">
  $(document).ready(function(){

    var options = {
      scaleBeginAtZero : false,
      scaleShowGridLines : true,
      scaleGridLineColor : "rgba(0,0,0,.05)",
      scaleGridLineWidth : 0.5,
      scaleShowHorizontalLines: true,
      scaleShowVerticalLines: true,
      showTooltips: false,
      pointLabelFontSize : 11,
      pointDot: true,
      datasetStrokeWidth : 2
    };

    var data = {
      labels: <%= aspects.map { |x| x[0].to_s.capitalize }.to_s.html_safe %>,
      datasets: [
        {
          fillColor: "rgba(255,157,0,0.0)",
          strokeColor: "rgba(255,119,0,1)",
          pointColor : "rgba(255,119,0,1)",
          data: <%= counts.map { |count| (count[1] * 100).floor } %>
        },
        {
          fillColor: "rgba(220,100,100,0.2)",
          strokeColor: "rgba(0,0,0,0)",
          data: <%= ([0] * aspects.size).to_s %>,
          pointColor : "rgba(220,220,220,0)",
        },
        {
          fillColor: "rgba(150,220,100,0.0)",
          strokeColor: "rgba(140,200,90,1)",
          pointColor : "rgba(140,200,90,1)",
          data: <%= aspects.map { |x| (x[1] * 100).floor } %>
        }
      ]
    }

    var ctx_topics = $("#<%= id %>_aspects").get(0).getContext("2d");
    var topicsChart = new Chart(ctx_topics).Radar(data, options);
  })
</script>

<canvas id="<%= id %>_aspects" width="500" height="300"></canvas>
